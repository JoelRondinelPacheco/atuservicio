<!DOCTYPE html>
<html
    xmlns:th="http://www.thymeleaf.org"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
    class="fondo-seccion">
    <head th:replace="fragments/head :: head"></head>

    <body>
        <nav th:replace="fragments/navbar :: navbar"></nav>

        <div
            style="
            margin-bottom: 250px;
            margin-left: 0px;
            margin-right: 0px;
            padding: 10px;

            ">
            <class= "container text-center fs-6">
                <div class="row g-2">
                    <div class="col-6">
                        <div
                            class="border border-info rounded shadow-lg p-3 mt-5"
                            style="background-color: transparent; color: white;
                            position: absolute;">
                            <h4>Solicitudes Pendientes</h4>
                            <table class="table table-striped" style="background-color: transparent;font-size: 10px">
                                <!-- Tu contenido de la tabla -->
                                <thead class="thead-dark">
                                    <tr>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Nombre</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Email</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Fecha</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Dirección</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Descripción</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Estado</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Aprobar</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Rechazar</th>
                                        <th style="background-color: #c0aaca; color:white" class="fs-6" scope="col">Acción</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    <tr
                                        th:each="contract : ${contracts}"
                                        th:if="${contract.state.name() == 'PENDING_APPROVAL'}">
                                        <td style="background-color: #c0aaca; color:white" class="fs-6" th:text="${contract.createdAt}"></td>
                                        <td style="background-color: #c0aaca; color:white" class="fs-6" th:text="${contract.customer.name}"></td>
                                        <td style="background-color: #c0aaca; color:white" class="fs-6" th:text="${contract.customer.email}"></td>
                                        <td style="background-color: #c0aaca; color:white" class="fs-6" th:text="${contract.customer.address}"></td>
                                        <td style="background-color: #c0aaca; color:white" class="fs-6" th:text="${contract.description}"></td>
                                        <td style="background-color: #c0aaca; color:white" class="fs-6" th:text="${contract.state}"></td>
                                        <td>
                                            <form th:action="@{/contract/supplier/accept/__${contract.id}__}">
                                                <label>Tiempo estimado en horas</label>
                                                <input type="number" value="0" name="estimatedTime" />
                                                <input
                                                    type="submit"
                                                    value="Cotizar"
                                                    class="btn btn-success" />  <!--ContractController: linea 120--><!--Lo setea a APPROVED_SUPPLIER-->
                                            </form>
                                        </td>
                                        <td>
                                            <a
                                                class="btn btn-danger"
                                                th:href="@{/contract/supplier/decline/__${contract.id}__}">
                                                Rechazar  <!--ContractController: linea 141--><!--Lo setea a REFUSED_SUPPLIER-->
                                            </a>
                                        </td>
                                        <td th:if="${contract.state.name() == 'PENDING_COMPLETION'}">
                                            <a
                                                class="btn btn-danger"
                                                th:href="@{/contract/supplier/decline/__${contract.id}__}">
                                                Termine mi trabajo  <!--ContractController: linea 212--><!--Lo setea a DONE_SUPPLIER-->
                                            </a>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div style="z-index:2;" class="col-6">
                        <div
                            class="border border-success rounded shadow-lg p-3 mt-5"
                            style="background-color: transparent">
                            <h4 style="color: white;"  >Solicitudas Aprobadas</h4>
                            <table class="table table-bordered" style="font-size: 10px">
                                <thead class="thead-dark">
                                    <tr>
                                        <th style="background-color: #c0aaca; color:  white;" class="shadow-none fs-6" scope="col">Fecha</th>
                                        <th style="background-color: #c0aaca; color:  white;" class="shadow-none fs-6" scope="col">Nombre</th>
                                        <th style="background-color: #c0aaca; color:  white;" class="shadow-none fs-6" scope="col">Email</th>
                                        <th style="background-color: #c0aaca; color:  white;" class="shadow-none fs-6" scope="col">Dirección</th>
                                        <th style="background-color: #c0aaca; color:  white;" class="shadow-none fs-6" scope="col">Descripción</th>
                                        <th style="background-color: #c0aaca; color:  white;" class="shadow-none fs-6" scope="col">Estado</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    <tr
                                        th:each="contract : ${contracts}"
                                        th:if="${contract.state.name() == 'APPROVED_SUPPLIER'}">
                                        <td style="background-color: #c0aaca; color:  white;"  class="fs-6 shadow-none" th:text="${contract.createdAt}"></td>
                                        <td style="background-color: #c0aaca; color:  white;"  class="fs-6 shadow-none" th:text="${contract.customer.name}"></td>
                                        <td style="background-color: #c0aaca; color:  white;"  class="fs-6 shadow-none" th:text="${contract.customer.email}"></td>
                                        <td style="background-color: #c0aaca; color:  white;"  class="fs-6 shadow-none" th:text="${contract.customer.address}"></td>
                                        <td style="background-color: #c0aaca; color:  white;"  class="fs-6 shadow-none" th:text="${contract.description}"></td>
                                        <td style="background-color: #c0aaca; color:  white;"  class="fs-6 shadow-none" th:text="${contract.state}"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div style="z-index:2;" class="col-6">
                        <div
                            class="border border-danger rounded shadow-lg p-3 mt-5"
                            style="background-color: transparent">
                            <h4 style="color: white;" >Solicitudes Rechazadas</h4>
                            <table class="table table-hover" style="font-size: 10px">
                                <!-- Tu contenido de la tabla -->
                                <thead style="background-color: transparent" class="thead-dark">
                                    <tr>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Nombre</th>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Email</th>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Dirección</th>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Fecha</th>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Descripción</th>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Estado</th>
                                        <th style="background-color: #c0aaca; color:  white; " class="fs-6 shadow-none" scope="col">Comentario</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    <tr
                                        th:each="contract : ${contracts}"
                                        th:if="${contract.state.name() == 'DONE_CLIENT'}">
                                        <td style="background-color: #c0aaca; color:  white; " class="fs-6" th:text="${contract.createdAt}"></td>
                                        <td style="background-color: #c0aaca; color:  white;" class="fs-6" th:text="${contract.customer.name}"></td>
                                        <td style="background-color: #c0aaca; color:  white;" class="fs-6" th:text="${contract.customer.email}"></td>
                                        <td style="background-color: #c0aaca; color:  white;" class="fs-6" th:text="${contract.customer.address}"></td>
                                        <td style="background-color: #c0aaca; color:  white;" class="fs-6" th:text="${contract.description}"></td>
                                        <td style="background-color: #c0aaca; color:  white;" class="fs-6" th:text="${contract.state}"></td>
                                        <td style="background-color: #c0aaca; color:  white;" class="fs-6" th:if="${contract.hasComment}">
                                            <button>
                                                <a
                                                    th:href="@{'/contract/comments/' + ${contract.id}}"
                                                    >Ver</a
                                                >
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div style="z-index:2;" class="col-6">
                        <div
                            class="border border-danger rounded  p-3 mt-5"
                            style="background-color: transparent">
                            <h4  style="color: white;" >Solicitudes Canceladas</h4>
                            <table class="table table-hover" style="font-size: 10px">
                                <!-- Tu contenido de la tabla -->
                                <thead class="thead-dark" >
                                    <tr>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">Fecha</th>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">N. del cliente</th>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">Email</th>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">Dirección</th>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">Descripción</th>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">Estado</th>
                                        <th style="background-color: #c0aaca; color:white " class="fs-6" scope="col">Comentario</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    <tr
                                        th:each="contract : ${contracts}"
                                        th:if="${contract.state.name() == 'CANCELED_CLIENT'}">
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:text="${contract.createdAt}"></td>
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:text="${contract.customer.name}"></td>
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:text="${contract.customer.email}"></td>
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:text="${contract.customer.address}"></td>
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:text="${contract.description}"></td>
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:text="${contract.state}"></td>
                                        <td style="background-color: #c0aaca; color:white " class="fs-6" th:if="${contract.hasComment}">
                                            <button>
                                                <a
                                                    th:href="@{'/contract/comments/supplier/' + ${contract.id}}"
                                                    >Ver</a
                                                >
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
        </div>

        <footer th:replace="fragments/footer :: footer"></footer>
    </body>
</html>
